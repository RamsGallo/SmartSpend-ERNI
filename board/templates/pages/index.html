{% extends 'base.html' %}

{% block title %}
    Smart Spend
{% endblock title %}

{% block header %}
<script src="https://cdn.tailwindcss.com"></script>
{% endblock header %}

{% block content %}
<body class="bg-gray-100 text-gray-800 min-h-screen flex items-center justify-center p-6">
  <div class="max-w-3xl w-full bg-white shadow-xl rounded-2xl p-8 space-y-6">
    
    <div class="text-center">
      <h1 class="text-3xl font-bold text-blue-600">Smart Budgeting App</h1>
      <p class="text-lg mt-2">Balance: <span class="font-semibold text-green-600">₱{{ balance }}</span></p>
    </div>

    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addTransactionModal">
      Cash In
    </button>
    
    <div>
      <h2 class="text-xl font-semibold mb-4 text-gray-700">Transactions</h2>
      <ul class="space-y-2">
        {% for t in transactions %}
          <li class="flex justify-between items-center bg-gray-50 p-3 rounded-lg shadow-sm">
            <span class="text-sm text-gray-700">{{ t.description }}</span>
            <span class="font-medium {% if t.type == 'income' %}text-green-600{% else %}text-red-600{% endif %}">
              {{ t.type }} - ₱{{ t.amount }}
            </span>
          </li>
        {% endfor %}
      </ul>
    </div>

    <div class="text-center">
      <a href="{{ url_for('pages.advice') }}" 
         class="inline-block bg-green-600 text-white px-6 py-2 rounded-lg shadow hover:bg-green-700 transition">
        Get AI Advice
      </a>
    </div>

  </div>

  <div class="modal fade" id="addTransactionModal" tabindex="-1" aria-labelledby="addTransactionModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addTransactionModalLabel">Add Transaction</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form method="POST" action="{{ url_for('pages.add_transaction') }}">
          <div class="modal-body">
            <input type="hidden" name="type" value="income">
            
            <div class="mb-3">
              <label for="amount" class="form-label">Amount</label>
              <input type="number" step="0.01" name="amount" required class="form-control" id="amount">
            </div>

            <div class="mb-3">
              <label for="description" class="form-label">Description</label>
              <input type="text" name="description" required class="form-control" id="description">
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Add Transaction</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
{% endblock content %}